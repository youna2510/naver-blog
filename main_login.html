<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Naver Blog Project</title>
    <style>

        html, body {
            min-width:1280px;
            overflow-y:auto;
            overflow-x: auto;
        }

        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f8f9fa;
        }


/*í—¤ë” ë¶€ë¶„*/        
.header {
            display: flex;
            justify-content: space-between; /* ì¢Œìš°ë¡œ ê· ë“± ë°°ì¹˜ */
            align-items: center; /* ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ */
            padding: 5px 17%; /* ì¢Œìš° íŒ¨ë”© ì„¤ì • */
            background-color: #f1d1d3;
            color: white;
        }

        .header .logo {
            display: flex;
            align-items: center;
        }


        .header .logo {
            height: 49px; /* ê³ ì •ëœ ë¡œê³  í¬ê¸° */
            width: auto; /* ë¹„ìœ¨ ìœ ì§€ */
            margin: 1px; /* margin (ì´ë¯¸ì§€ë¥¼ ë‘˜ëŸ¬ì‹¸ëŠ” ì—¬ë°±ì˜ í­) ì œê±° */
            transition: margin-left 0.3s ease;
            font-size:27px;
            font-weight:800;

        }

        .header .search {
            display: flex;
            justify-content: center;
            align-items: center;
        }


        .header .search input {
            width: 60%; /* ê²€ìƒ‰ì°½ ë„ˆë¹„ */
            padding: 12px;
            border: none;
            border-radius: 0px;
            margin-right: 300px;
            border-color: #f1d1d3;

        }

        .header .search button { /*ìœ—ì¤„ ê²€ìƒ‰ ë²„íŠ¼*/
            padding: 11px 13px;
            border: none;
            background-color: #da9d9c;
            border-color: #da9d9c;
            color: #fff;
            font-weight: bold;
            cursor: pointer;
            margin-left:0px;
        }

        
        .header .search button:hover {
            background-color: #861f1c;
        }

        .header .menu {
            display: flex;
        }


        .header .menu button {
            background-color: #da9d9c;
            color: #fff;
            border: none;
            padding: 11px 16px;
            border-radius:2px;
            cursor: pointer;
            font-weight: bold;
        }

        .header .menu button:hover {
            background-color: #861f1c;
        }

        .search select {
            width:100%;
            padding:11.8px;
            border: 0.05px solid;
            border-color: #da9d9c;
            margin-right:20px;
        }
        
        .main-container {
    display: flex;
    justify-content: space-between;
    align-items: stretch; /* ë†’ì´ë¥¼ ì»¨í…Œì´ë„ˆ ì „ì²´ë¡œ ëŠ˜ë¦¬ê¸° */
    margin: 20px;
}

/*í—¤ë” ë¶€ë¶„ ì˜¤ë¥¸ìª½ ê³„ì • ì´ë¦„ ë¶€ë¶„*/
        .header-profile img{
            width:38px;
            border-radius:50px;
        }

        .header-profile {
            display:flex;
            flex-direction:row;
            font-size:15px;
        }

        .header-profile-name{
            margin-left:8px;
            margin-top:10px;
            margin-right:80px;
        }



        .header-profile button { /*ìœ—ì¤„ ê²€ìƒ‰ ë²„íŠ¼*/
            padding: 5px 10px;
            border: none;
            background-color: #da9d9c;
            border-color: #da9d9c;
            color: #fff;
            font-weight: bold;
            cursor: pointer;
            font-size:14px;
            margin-top:5px;
            margin-right:-150px;
        }
        
        .header-profile button:hover {
            background-color: #861f1c;
        }

        .neighbor-link {
    text-decoration: none; /* ë°‘ì¤„ ì œê±° */
    color: inherit; /* ê¸°ë³¸ í…ìŠ¤íŠ¸ ìƒ‰ìƒ ìœ ì§€ */
}

.neighbor-name {
    font-weight: bold; /* ê¸€ì”¨ ê°•ì¡° (ì„ íƒ ì‚¬í•­) */
    margin-left: 5px; /* ê°„ê²© ì¡°ì • */
}

.neighbor-profile {
    width: 50px; /* í”„ë¡œí•„ ì‚¬ì§„ í¬ê¸° */
    height: 50px;
    border-radius: 50%; /* ë‘¥ê·¼ ì´ë¯¸ì§€ */
}



/* ì™¼ìª½ ê²Œì‹œê¸€ ë¶€ë¶„ */
.post {
    display: flex;
    align-items: center; /* ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ */
    gap: 15px; /* ì´ë¯¸ì§€ì™€ ê¸€ ë‚´ìš© ì‚¬ì´ ê°„ê²© ì¡°ì • */
    padding: 20px 10px;
    border-bottom: 1px solid #ddd;
    margin-top: 20px; /* ìœ„ìª½ ê°„ê²© ì¶”ê°€ */
}

.post:last-child {
    border-bottom: none;
}

.post img {
    width: 80px;  /* ì´ë¯¸ì§€ í¬ê¸° ì¡°ì • */
    height: 80px;
    object-fit: cover; /* ë¹„ìœ¨ ìœ ì§€í•˜ë©´ì„œ í¬ê¸° ì¡°ì • */
    border-radius: 50%;
    flex-shrink: 0; /* í¬ê¸°ê°€ ì¤„ì–´ë“¤ì§€ ì•Šë„ë¡ ì„¤ì • */
}

.post-content {
    flex: 1; /* ë‚´ìš©ì´ ë‚¨ì€ ê³µê°„ì„ ì°¨ì§€í•˜ë„ë¡ ì„¤ì • */
    min-width: 0; /* ë‚´ìš©ì´ ë„˜ì¹˜ì§€ ì•Šë„ë¡ ì„¤ì • */
}

.post-author {
    display: flex;
    align-items: center;
    gap: 10px; /* í”„ë¡œí•„ ì‚¬ì§„ê³¼ ë‹‰ë„¤ì„ ì‚¬ì´ ê°„ê²© ì¡°ì • */
}

.post-author img { /*ê²Œì‹œê¸€ ì‘ì„±ì í”„ë¡œí•„ ì‚¬ì§„*/
    width: 38px;
    height: 38px;
    border-radius: 50%;
    margin-right: 4px;
}

.post-title { /*ê²Œì‹œê¸€ ì œëª©*/
    font-size: 17px;
    font-weight: bold;
    margin-bottom: 10px;
    margin-top:16px;
}

.post-text {
    font-size: 14px;
    color: #666;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
}

.post-actions { /*ê²Œì‹œê¸€ì—ì„œ ì¢‹ì•„ìš”, ëŒ“ê¸€ ë“± */
    font-size: 12px;
    color: #777;
    margin-top: 8px;
    display: flex;
    align-items: center;
}

.post-actions span {
    margin-right: 8px;
}

.post-actions img {
    width: 16px;
    height: 16px;
}




.post-content {
    display: flex;
    flex: 1; /* âœ… ê¸€ ë‚´ìš©ì´ ìµœëŒ€í•œ ì°¨ì§€í•˜ë„ë¡ ì„¤ì • */
    align-items: center; /* âœ… ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ */
    justify-content: space-between;
}


/* ğŸ“Œ ëŒ€í‘œ ì‚¬ì§„ ìŠ¤íƒ€ì¼ (ì™„ì „íˆ ì˜¤ë¥¸ìª½ ë + ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬) */
.post-thumbnail {
    width: 130px;  /* âœ… ëŒ€í‘œ ì‚¬ì§„ í¬ê¸° */
    height: 130px;
    object-fit: cover; /* âœ… ë„¤ëª¨ ì•ˆì— ê½‰ ì°¨ë„ë¡ */
    border-radius: 0 !important; /* âœ… ë‘¥ê¸€ì–´ì§€ëŠ” ê±° ì™„ì „ ì œê±° */
    margin-left: auto; /* âœ… ì™¼ìª½ ë‚´ìš©ì„ ë°€ì–´ë‚´ê³  ì˜¤ë¥¸ìª½ ëìœ¼ë¡œ */
    display: block; /* âœ… flex ì†ì„± ë¬¸ì œ í•´ê²° */
}


/* ì™¼ìª½ ê²Œì‹œê¸€ ë¶€ë¶„ ë†’ì´ ëŠ˜ë¦¬ê¸° */
.left-column {
    width: 70%; /* ì™¼ìª½ ë¶€ë¶„ í¬ê¸° ì¡°ì ˆ */
    max-width: 1500px; /* ìµœëŒ€ ë„ˆë¹„ ì œí•œ */
    padding: 25px;
    margin-top: 30px; /* ìƒë‹¨ ì—¬ë°± ì¶”ê°€ */
}

/* ê²Œì‹œë¬¼ ëª©ë¡ ì•„ë˜ìª½ ì—¬ë°± ì¶”ê°€ */
.mutual-posts {
    margin-top: 40px; /* ê²Œì‹œë¬¼ ëª©ë¡ê³¼ ì´ì›ƒ ìƒˆê¸€ ë°•ìŠ¤ ì‚¬ì´ì˜ ê°„ê²©ì„ ë„“í˜ */
}

/* ì´ì›ƒìƒˆê¸€ ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ */
       /* ì´ì›ƒ ìƒˆê¸€ ë°•ìŠ¤ ìœ„ë¡œ ì˜¬ë¦¬ê¸° */
        .new-posts {
        position: relative; /* ìƒëŒ€ ìœ„ì¹˜ë¡œ ì„¤ì • */
        top: -20px; /* ë°•ìŠ¤ë¥¼ ìœ„ë¡œ 20px ì˜¬ë¦¬ê¸° */
        margin-bottom: 20px; /* ì•„ë˜ìª½ ê°„ê²© ì¶”ê°€ */
        z-index: 999;
        }

        /* new-posts ê¸€ì”¨ ì•ˆ ë³´ì´ëŠ” ë¬¸ì œ í•´ê²° */
        .new-posts p {
        font-size: 18px;
        color: #333; /* í…ìŠ¤íŠ¸ ìƒ‰ìƒ */
        font-weight: bold;
        margin-bottom: 20px; /* ì•„ë˜ìª½ ì—¬ë°± ì¶”ê°€ */
        }


/*ê²Œì‹œê¸€ ì‘ì„±ì ê´€ë ¨*/
        .post-author {
            display: flex;
            align-items: center; /* ì„¸ë¡œ ì •ë ¬ ìœ ì§€ */
            gap: 8px; /* í”„ë¡œí•„ ì‚¬ì§„, ì´ë¦„, ë‚ ì§œ ì‚¬ì´ ê°„ê²© */
        }

        .author-info {
            display: flex;
            flex-direction: column; 
        }

        .author-name {
            font-size: 14px;
            font-weight: bold;
        }

        .time {
            font-size: 12px;
            color: gray;
            margin-top:3px;
        }


/*ì¢‹ì•„ìš”*/
        .heart {
            font-size: 16px;
            cursor: pointer;
            transition: color 0.3s ease-in-out;
        }

        .heart.active {
                color: red; /* ì±„ì›Œì§„ í•˜íŠ¸ ìƒ‰ìƒ */
        }


/*ê²Œì‹œê¸€ ë³¸ë¬¸ ë¶€ë¶„*/       
        .post-text {
            max-width: 900px; /* ì›í•˜ëŠ” ìµœëŒ€ ê°€ë¡œ ë„ˆë¹„ ì„¤ì • */
            word-wrap: break-word; /* ê¸´ ë‹¨ì–´ë„ ì¤„ë°”ê¿ˆë˜ë„ë¡ ì„¤ì • */
            overflow-wrap: break-word; /* í…ìŠ¤íŠ¸ê°€ ë°•ìŠ¤ë¥¼ ë„˜ìœ¼ë©´ ìë™ ì¤„ë°”ê¿ˆ */
            white-space: normal; /* ê¸°ë³¸ì ìœ¼ë¡œ ì¤„ë°”ê¿ˆ í—ˆìš© */
            line-height: 1.7; /* ì¤„ ê°„ê²© ì¡°ì ˆ */
        }


/*ì˜¤ë¥¸ìª½*/
.right-sidebar {
    width: 350px; /* ê¸°ì¡´ë³´ë‹¤ ë” ë„“ê²Œ ì„¤ì • */
    height: 1000px; /* ê¸°ì¡´ ë†’ì´ë³´ë‹¤ í™•ì¥ */
    min-height: 100vh; /* ìµœì†Œ ë†’ì´ë¥¼ í™”ë©´ ì „ì²´ ë†’ì´ë¡œ ì„¤ì • */
    flex-shrink: 0; /* í¬ê¸° ì¤„ì–´ë“¤ì§€ ì•Šë„ë¡ ì„¤ì • */
    margin-left: 30px; /* ì™¼ìª½ ì—¬ë°± */
    position: absolute; /* ì˜¤ë¥¸ìª½ìœ¼ë¡œ ê³ ì • */
    right: 8%; /* ê¸°ì¡´ 10% â†’ 8%ë¡œ ë³€ê²½ (ë„ˆë¬´ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ë¶™ì§€ ì•Šê²Œ) */
    top: 90px; /* ìœ„ìª½ ì—¬ë°± ì„¤ì • */
    overflow-y: auto; /* ë‚´ìš©ì´ ë§ì•„ì§€ë©´ ìŠ¤í¬ë¡¤ ìƒì„± */
}




        /* í”„ë¡œí•„ ì˜ì—­ */
        .profile {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .profile-left {
            display: flex;
            align-items: center;
        }

        .user-profilepicture {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 10px;
        }

        .profile-info {
            flex: 1;
        }

        .profile-name {
            font-size: 16px;
            font-weight: bold;
        }

        .profile-status {
            font-size: 12px;
            color: gray;
        }

        .logout-btn {
            background-color: white;
            border: 1px solid lightgray;
            padding: 5px 10px;
            font-size: 12px;
            border-radius: 5px;
            cursor: pointer;
        }

        .logout-btn:hover {
            background-color: #f0f0f0;
        }

        /* ë©”ë‰´ */
        .menu {
            display: flex;
            margin-bottom: 20px;
        }

        .menu button {
            flex: 1;
            padding: 12px;
            font-size: 14px;
            border: none;
            cursor: pointer;
            font-weight: bold;
        }

        .menu button:hover {
            background-color: #861f1c;
        }

        .menu .active {
            background-color: #da9d9c;
            color: white;
        }

        /* ì•Œë¦¼ íƒ­ (ë‚´ ì†Œì‹, ë‚´ í™œë™, ì´ì›ƒ ëª©ë¡)*/
        .notification-tabs {
            display: flex;
            justify-content: space-between;
            border-bottom: 1px solid #ddd;
            padding-bottom: 8px;
            margin-bottom: 13px;
        }

        .notification-tabs div {
            flex: 1;
            text-align: center;
            padding: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
        }

        .notification-tabs .active {
            border-bottom: 1.5px solid black;
        }

        /* ì•Œë¦¼ ë¦¬ìŠ¤íŠ¸ */
        .notifications {
            margin-bottom: 18px;
        }

        .notification-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
            padding: 15px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .notification-item:last-child {
            border-bottom: none;
        }

        .notification-content {
            flex: 1;
        }

        .notification-user {
            font-weight: bold;
            color: #2c8f3b;
        }

        .notification-time {
            font-size: 12px;
            color: gray;
        }

        .delete-btn {
            background: none;
            border: none;
            color: gray;
            cursor: pointer;
            font-size: 16px;
            margin-left:5px;
        }

        .delete-btn:hover {
            color: black;
        }

        /* ëª¨ë‘ ì‚­ì œ ë²„íŠ¼ */
        .delete-all {
            text-align: center;
            padding: 10px;
            background-color: #f8f8f8;
            border-top: 1px solid #ddd;
            cursor: pointer;
            font-size: 14px;
        }

        .delete-all:hover {
            background-color: #f0f0f0;
        }

        /* ì¢‹ì•„ìš”(í•˜íŠ¸) ê¸°ëŠ¥ */
        .heart {
            cursor: pointer;
            font-size: 14px;
        }

        .liked {
            color: red;
        }



/* ì´ì›ƒ ëª©ë¡ ì»¨í…Œì´ë„ˆ */
.neighbor-container {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}

/* ì´ì›ƒ í•­ëª© */
.neighbor-item {
    display: flex;
    align-items: center;  /* ìˆ˜ì§ ì¤‘ì•™ ì •ë ¬ */
    width: calc(50% - 10px);  /* 1ì¤„ì— 2ëª…ì”© */
    padding: 10px;
    background: #f8f9fa;
    border-radius: 5px;
    margin-bottom: 10px;
}

/* ì´ì›ƒ ë‚´ìš© */
.neighbor-content {
    display: flex;
    flex-direction: row;  /* ì‚¬ì§„ ì™¼ìª½, ë‹‰ë„¤ì„ ì˜¤ë¥¸ìª½ */
    align-items: center;  /* ìˆ˜ì§ ì¤‘ì•™ ì •ë ¬ */
    justify-content: flex-start;  /* ì™¼ìª½ ì •ë ¬ */
    width: 100%; /* ì „ì²´ ë„ˆë¹„ ì‚¬ìš© */
}

/* í”„ë¡œí•„ ì´ë¯¸ì§€ */
.neighbor-profile {
    width: 35px;  /* í¬ê¸° ì¡°ì • */
    height: 35px;
    border-radius: 50%;
    margin-right: 10px;  /* ì´ë¯¸ì§€ ì˜¤ë¥¸ìª½ ê°„ê²© */
    flex-shrink: 0; /* í¬ê¸° ê³ ì • */
}

/* ë‹‰ë„¤ì„ ìŠ¤íƒ€ì¼ */
.neighbor-name {
    font-size: 14px;  /* ê¸€ì í¬ê¸° */
    font-weight: bold;
    text-align: left;  /* ì™¼ìª½ ì •ë ¬ */
    white-space: nowrap; /* ë‹‰ë„¤ì„ì´ ì¤„ ë°”ê¿ˆë˜ì§€ ì•Šë„ë¡ ì„¤ì • */
    overflow: hidden; /* ë„ˆë¬´ ê¸¸ë©´ ìˆ¨ê¹€ */
    text-overflow: ellipsis; /* ìƒëµ ë¶€í˜¸(...) ì¶”ê°€ */
}

.left-column {
    margin-top:-5px;
    margin-bottom:5px;
    margin-left:25px;
    font-size:20px;
    font-weight:700;
}


    </style>
</head>

    <header class="header">
        <!-- ë¡œê³  -->
        <div class="logo">SG blog</div>

        <!-- ê²€ìƒ‰ ì˜ì—­ -->
        <div class="search">
            <div class="search-select">
                <label for="search-type" class="visually-hidden"></label>
                <select id="search-type" name="type">
                    <option value="geul">ê¸€</option>
                    <option value="blog">ë¸”ë¡œê·¸</option>
                    <option value="id">ë³„ëª…, ì•„ì´ë””</option>
                </select>
            </div>
            <button class="search-button">ë¡œ ê²€ìƒ‰í•˜ê¸°</button>
        </div>

        <div class="header-profile">
            <button class="header-profile-setting" onclick="redirectToProfile()">í”„ë¡œí•„ ìˆ˜ì •</button>
        </div>       
    </header>

    <div class="main-container">
        <div class="left-column">
           ì´ì›ƒ ìƒˆê¸€ 
             <div class="new-posts">
            </div>
        </div>


        <div class="right-sidebar">
            <!-- í”„ë¡œí•„ ì •ë³´ -->
            <div class="profile">
                <div class="profile-left">
                    <!-- í”„ë¡œí•„ ì‚¬ì§„ ë³€ê²½ -->
                    <img class="user-profilepicture" id="profile-image" src="assets/profile.png" alt="í”„ë¡œí•„ ì´ë¯¸ì§€">
                    <div class="profile-info">
                        <span class="profile-name user-nickname" id="user-nickname"></span> <!-- ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ì´ë¦„ í‘œì‹œ -->
                    </div>
                </div>
                <button class="logout-btn" onclick="location.href='main.html'">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
            <!-- ë©”ë‰´ -->
            <div class="menu">
                <button class="active" onclick="location.href='myprolog.html'">ë‚´ ë¸”ë¡œê·¸</button>
                <button onclick="location.href='write.html'">âœ ê¸€ì“°ê¸°</button>
            </div>
        
            <!-- ì•Œë¦¼ íƒ­ -->
            <div class="notification-tabs">
                <div class="tab active" data-tab="news">ë‚´ ì†Œì‹</div>
                <div class="tab" data-tab="activity">ë‚´ í™œë™</div>
                <div class="tab" data-tab="neighbors">ì´ì›ƒ ëª©ë¡</div>
            </div>
        
            <!-- ì•Œë¦¼ ë¦¬ìŠ¤íŠ¸ -->
            <div class="notifications">
                <!-- ì—¬ê¸°ì— JavaScriptê°€ ë°±ì—”ë“œì—ì„œ ë°›ì•„ì˜¨ ë°ì´í„°ë¥¼ ë™ì ìœ¼ë¡œ ì¶”ê°€í•  ê±°ì„ -->
            </div>
        </div>
    </div>
        <script>

let loggedInUserUrlname = '';

// ì‚¬ìš©ì URL ì´ë¦„ì„ ì„œë²„ì—ì„œ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜
async function getUserUrlname() {
    try {
        const response = await fetch("http://127.0.0.1:8000/profile/me/", {
            method: "GET",
            headers: {
                "Authorization": `Bearer ${localStorage.getItem("access_token")}`,
                "Content-Type": "application/json"
            }
        });

        if (response.status === 200) {
            const userData = await response.json();
            loggedInUserUrlname = userData.urlname; // ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ urlname ì €ì¥
        } else {
            console.log("âŒ ì‚¬ìš©ì ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", response.status);
        }
    } catch (error) {
        console.error("âŒ ì„œë²„ ì—°ê²° ì˜¤ë¥˜:", error);
    }
}

// í”„ë¡œí•„ ìˆ˜ì • í˜ì´ì§€ë¡œ ë¦¬ë””ë ‰ì…˜
async function redirectToProfile() {
    // URLnameì„ ì„œë²„ì—ì„œ ê°€ì ¸ì˜¤ê¸° ì „ì— í´ë¦­ì´ ì‹¤í–‰ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ê¸°ë‹¤ë¦¬ê¸°
    await getUserUrlname();

    if (loggedInUserUrlname) {
        location.href = `profile.html?urlname=${encodeURIComponent(loggedInUserUrlname)}`;
    } else {
        console.log("âŒ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ urlnameì„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
    }
}
            // ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ í”„ë¡œí•„ ì •ë³´ë¥¼ ë°›ì•„ì˜¤ëŠ” í•¨ìˆ˜
async function fetchUserProfile() {
    try {
        const response = await fetch("http://127.0.0.1:8000/profile/me/", {
            method: "GET",
            headers: {
                "Authorization": `Bearer ${localStorage.getItem("access_token")}`,
                "Content-Type": "application/json"
            }
        });

        if (response.status === 200) {
            const userData = await response.json();
            const userNickname = userData.username;
            const userPic = userData.user_pic;

            // í”„ë¡œí•„ ì´ë¯¸ì§€ ê²½ë¡œ ì„¤ì •
            let fullImageUrl;
            if (userPic && userPic.includes('user_pics')) {
                fullImageUrl = `http://127.0.0.1:8000${userPic}`;
            } else {
                fullImageUrl = `http://127.0.0.1:8000/media/default/user_default.jpg`;
            }

            // í”„ë¡œí•„ ì •ë³´ ì—…ë°ì´íŠ¸
            document.getElementById("user-nickname").textContent = userNickname;
            document.getElementById("profile-image").src = fullImageUrl;
        } else {
            console.log("âŒ ì‚¬ìš©ì í”„ë¡œí•„ ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", response.status);
        }
    } catch (error) {
        console.error("âŒ ì„œë²„ ì—°ê²° ì˜¤ë¥˜:", error);
    }
}

// í˜ì´ì§€ê°€ ë¡œë“œëœ í›„ í”„ë¡œí•„ ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°
document.addEventListener("DOMContentLoaded", fetchUserProfile);

         document.addEventListener("DOMContentLoaded", async function () {
    const accessToken = localStorage.getItem("access_token");
    if (!accessToken) {
        alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
        window.location.href = "login.html";
        return;
    }

    const userUrlname = await getUserUrlname(); // ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ urlname ê°€ì ¸ì˜¤ê¸°

    // API ì—”ë“œí¬ì¸íŠ¸ ì„¤ì • (ì´ì›ƒ ëª©ë¡ì€ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì— ë”°ë¼ ë™ì  URL ì ìš©)
    const API_ENDPOINTS = {
        news: "http://127.0.0.1:8000/news/list/",
        activity: "http://127.0.0.1:8000/activity/list/",
        neighbors: `http://127.0.0.1:8000/profile/${userUrlname}/neighbors/` // ë°±í‹± ì‚¬ìš©
    };

    const notificationsContainer = document.querySelector(".notifications");
    const tabs = document.querySelectorAll(".tab");

    // íƒ­ í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
    tabs.forEach(tab => {
        tab.addEventListener("click", function () {
            tabs.forEach(t => t.classList.remove("active"));
            tab.classList.add("active");

            const tabType = tab.getAttribute("data-tab");
            fetchNotifications(API_ENDPOINTS[tabType], tabType);
        });
    });

    // ì•Œë¦¼ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜
    async function fetchNotifications(apiUrl, tabType) {
        try {
            const response = await fetch(apiUrl, { // API í˜¸ì¶œ URL ìˆ˜ì •
                method: "GET",
                headers: {
                    "Authorization": `Bearer ${accessToken}`,
                    "Content-Type": "application/json"
                }
            });

            if (response.status === 200) {
                const data = await response.json();
                console.log(`ğŸ“¢ ${apiUrl} ë°ì´í„°:`, data);

                notificationsContainer.innerHTML = ""; // ê¸°ì¡´ ë°ì´í„° ì´ˆê¸°í™”

                if (tabType === "neighbors") {
    // "ì´ì›ƒ ëª©ë¡" ì²˜ë¦¬ (1ì¤„ì— 2ëª…ì”© í‘œì‹œí•˜ê³  user_pic ì¶”ê°€)
    const neighborContainer = document.createElement("div");
    neighborContainer.classList.add("neighbor-container");

    data.neighbors.forEach((neighbor, index) => {
        const { username, user_pic, urlname } = neighbor; // urlname ì¶”ê°€

        // user_pic ê²½ë¡œ ì„¤ì •: ê¸°ë³¸ ì‚¬ì§„(default)ì¸ì§€, ì‚¬ìš©ì ì‚¬ì§„(user_pics)ì¸ì§€ í™•ì¸
        let fullImageUrl;
        if (user_pic && user_pic.includes('user_pics')) {
            fullImageUrl = `http://127.0.0.1:8000${user_pic}`;
        } else {
            fullImageUrl = `http://127.0.0.1:8000/media/default/user_default.jpg`;
        }

        const neighborItem = document.createElement("div");
        neighborItem.classList.add("neighbor-item");

        // í´ë¦­ ì‹œ ì´ë™í•  URL
        const profileUrl = `http://127.0.0.1:5500/blog.html?urlname=${encodeURIComponent(urlname)}`;

        neighborItem.innerHTML = `
            <div class="neighbor-content">
                <a href="${profileUrl}" class="neighbor-link">
                    <img src="${fullImageUrl}" alt="${username}" class="neighbor-profile">
                </a>
                <a href="${profileUrl}" class="neighbor-link">
                    <span class="neighbor-name">${username}</span>
                </a>
            </div>
        `;

        // ì§ìˆ˜ ë²ˆì§¸ ì•„ì´í…œì— ì¤„ë°”ê¿ˆ ì¶”ê°€ (1ì¤„ì— 2ëª…ì”©)
        if (index % 2 === 0 && index !== 0) {
            neighborContainer.appendChild(document.createElement("br"));
        }

        // DOMì— ì¶”ê°€
        neighborContainer.appendChild(neighborItem);
    });

    notificationsContainer.appendChild(neighborContainer);
}
 else {
               // ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ urlname ê°€ì ¸ì˜¤ê¸°
let loggedInUserUrlname = null;

async function getUserUrlname() {
    try {
        const response = await fetch("http://127.0.0.1:8000/profile/me/", {
            method: "GET",
            headers: {
                "Authorization": `Bearer ${localStorage.getItem("access_token")}`,
                "Content-Type": "application/json"
            }
        });

        if (response.status === 200) {
            const userData = await response.json();
            loggedInUserUrlname = userData.urlname; // ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ urlname ì €ì¥
        } else {
            console.log("âŒ ì‚¬ìš©ì ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", response.status);
        }
    } catch (error) {
        console.error("âŒ ì„œë²„ ì—°ê²° ì˜¤ë¥˜:", error);
    }
}

// post_idê°€ ëª‡ ë²ˆì§¸(n)ì¸ì§€ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜
async function getPostIndex(postId) {
    try {
        const response = await fetch("http://127.0.0.1:8000/posts/me/", {
            method: "GET",
            headers: {
                "Authorization": `Bearer ${localStorage.getItem("access_token")}`,
                "Content-Type": "application/json"
            }
        });

        if (response.status === 200) {
            const posts = await response.json();
            const index = posts.findIndex(post => post.id === postId);
            return index !== -1 ? index + 1 : null; // 1-based indexë¡œ ë³€í™˜
        } else {
            console.log("âŒ ë‚´ ê²Œì‹œê¸€ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", response.status);
            return null;
        }
    } catch (error) {
        console.error("âŒ ì„œë²„ ì—°ê²° ì˜¤ë¥˜:", error);
        return null;
    }
}

// ì•Œë¦¼ í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€ (ì—…ë°ì´íŠ¸ëœ ë²„ì „)
async function handleNotificationClick(post_urlname, post_id) {
    if (!loggedInUserUrlname) {
        await getUserUrlname();
    }

    if (post_urlname === loggedInUserUrlname) {
        // ë‚´ê°€ ì“´ ê¸€ì´ë¼ë©´ `myblog.html?n=` í˜•ì‹ìœ¼ë¡œ ì´ë™
        const postIndex = await getPostIndex(post_id);
        if (postIndex !== null) {
            window.location.href = `http://127.0.0.1:5500/myblog.html?n=${postIndex}`;
        } else {
            alert("ê²Œì‹œê¸€ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }
    } else {
        // ë‹¤ë¥¸ ì‚¬ìš©ìì˜ ê¸€ì´ë¼ë©´ ê¸°ì¡´ URLë¡œ ì´ë™
        window.location.href = `http://127.0.0.1:5500/blog_detail.html?urlname=${encodeURIComponent(post_urlname)}&post_id=${encodeURIComponent(post_id)}`;
    }
}

// "ë‚´ ì†Œì‹" & "ë‚´ í™œë™" ì²˜ë¦¬
data.forEach(activity => {
    const { type, content, created_at, post_urlname, post_id } = activity;

    let icon = "";
    if (type === "written_comment" || type === "post_comment") {
        icon = `<span class="icon comment">ğŸ’¬</span>`; // ëŒ“ê¸€ ì•„ì´ì½˜
    } else if (type === "written_reply" || type === "comment_reply") {
        icon = `<span class="icon reply">â†©</span>`; // ëŒ€ëŒ“ê¸€ ì•„ì´ì½˜
    } else if (type === "post_like" || type === "liked_post" || type === "liked_comment") {
        icon = `<span class="icon like">â¤ï¸</span>`; // ì¢‹ì•„ìš” ì•„ì´ì½˜
    }

    // ë‚ ì§œ í¬ë§· ë³€ê²½ (YYYY. M. D. HH:mm)
    let dateObj = new Date(created_at);
    let formattedDate = `${dateObj.getFullYear()}. ${dateObj.getMonth() + 1}. ${dateObj.getDate()} ${dateObj.getHours()}:${String(dateObj.getMinutes()).padStart(2, '0')}`;

    // ì•Œë¦¼ HTML ìƒì„±
    const notificationItem = document.createElement("div");
    notificationItem.classList.add("notification-item");
    notificationItem.innerHTML = `
        <div class="notification-content">
            ${icon} <span class="notification-user">${content}</span>
            <div class="notification-time">${formattedDate}</div>
        </div>
    `;

    // **í´ë¦­ ì‹œ ì´ë™**
    notificationItem.style.cursor = "pointer";
    notificationItem.addEventListener("click", () => handleNotificationClick(post_urlname, post_id));

    notificationsContainer.appendChild(notificationItem);
});


                }

            } else {
                alert("ì•Œë¦¼ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                console.log(`âŒ ${apiUrl} ì‘ë‹µ ìƒíƒœ ì½”ë“œ:`, response.status);
            }
        } catch (error) {
            console.error("âŒ ì„œë²„ ì—°ê²° ì˜¤ë¥˜:", error);
            alert("ì„œë²„ ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
        }
    }

    // ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ urlname ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜
    async function getUserUrlname() {
        try {
            const response = await fetch("http://127.0.0.1:8000/profile/me/", {
                method: "GET",
                headers: {
                    "Authorization": `Bearer ${localStorage.getItem("access_token")}`,
                    "Content-Type": "application/json"
                }
            });

            if (response.status === 200) {
                const userData = await response.json();
                return userData.urlname; // ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ urlname ë°˜í™˜
            } else {
                console.log("âŒ ì‚¬ìš©ì ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", response.status);
                return null;
            }
        } catch (error) {
            console.error("âŒ ì„œë²„ ì—°ê²° ì˜¤ë¥˜:", error);
            return null;
        }
    }

    // ê¸°ë³¸ì ìœ¼ë¡œ "ë‚´ ì†Œì‹" ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ê¸°
    fetchNotifications(API_ENDPOINTS.news, "news");
});



document.addEventListener("DOMContentLoaded", async function () {
    const accessToken = localStorage.getItem("access_token");
    if (!accessToken) {
        alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
        window.location.href = "login.html";
        return;
    }

    const API_ENDPOINTS = {
        mutualPosts: "http://127.0.0.1:8000/posts/mutual/recentweekly/",
    };

    const postsContainer = document.querySelector(".new-posts"); // ê²Œì‹œê¸€ì´ ì¶”ê°€ë  ì»¨í…Œì´ë„ˆ

    async function fetchMutualPosts() {
    try {
        const response = await fetch(API_ENDPOINTS.mutualPosts, {
            method: "GET",
            headers: {
                "Authorization": `Bearer ${accessToken}`,
                "Content-Type": "application/json"
            }
        });

        if (response.status === 200) {
            const data = await response.json();
            console.log("ğŸ“¢ ë°›ì€ ë°ì´í„°:", data);

            // ê¸°ì¡´ ê²Œì‹œë¬¼ ì´ˆê¸°í™”
            postsContainer.innerHTML = "";

            // ë°ì´í„° ìˆœíšŒí•˜ì—¬ HTML ë™ì ìœ¼ë¡œ ìƒì„±
            data.forEach(post => {
                const { id, user_name, user_pic, title, content, total_likes, total_comments, created_at, images } = post;

                let previewText = content
                    .replace(/<[^>]*>/g, "") // ëª¨ë“  HTML íƒœê·¸ ì œê±°
                    .replace(/ëŒ€í‘œì‚¬ì§„ ì„ íƒ/g, "") // 'ëŒ€í‘œ ì‚¬ì§„ ì„ íƒ' ì œê±°
                    .replace(/ì´ë¯¸ì§€ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”\.\.\./g, "") // 'ì´ë¯¸ì§€ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”...' ì œê±°
                    .trim();

                previewText = previewText.length > 125 ? previewText.substring(0, 125) + "..." : previewText;

                let fullImageUrl = user_pic && user_pic.startsWith("/media/") ? `http://127.0.0.1:8000${user_pic}` : "";

                // ğŸ“Œ ëŒ€í‘œ ì‚¬ì§„ ê°€ì ¸ì˜¤ê¸° (is_representative=trueì¸ ì´ë¯¸ì§€)
                let representativeImage = "";
                if (images && images.length > 0) {
                    const repImage = images.find(img => img.is_representative);
                    if (repImage) {
                        representativeImage = `<div class="post-right"><img src="${repImage.image}" alt="ëŒ€í‘œ ì´ë¯¸ì§€" class="post-thumbnail"></div>`;
                    }
                }

                let dateObj = new Date(created_at);
                let formattedDate = `${dateObj.getFullYear()}. ${dateObj.getMonth() + 1}. ${dateObj.getDate()} ${dateObj.getHours()}:${String(dateObj.getMinutes()).padStart(2, '0')}`;

                // ğŸ“Œ ê²Œì‹œê¸€ HTML ìƒì„± (`data-id`ë¥¼ í•˜íŠ¸ ë²„íŠ¼ê³¼ ê²Œì‹œë¬¼ì— ì¶”ê°€)
                const postHTML = `
                    <div class="post" data-id="${id}">
                        <div class="post-content">
                            <div class="post-left">
                                <div class="post-author">
                                    ${fullImageUrl ? `<img src="${fullImageUrl}" alt="${user_name}" class="profile-pic">` : ""}
                                    <div class="author-info">
                                        <span class="author-name">${user_name}</span>
                                        <span class="time">${formattedDate}</span>
                                    </div>
                                </div>
                                <div class="post-title">${title}</div>
                                <div class="post-text">${previewText}</div>
                                <div class="post-actions">
                                    <span class="heart" data-id="${id}">ğŸ¤</span>
                                    <span class="heart-count" id="like-count-${id}">${total_likes}</span>
                                    <span>ğŸ’¬ ${total_comments}</span>
                                </div>
                            </div>
                            ${representativeImage} <!-- âœ… ëŒ€í‘œ ì‚¬ì§„ ì¶”ê°€ -->
                        </div>
                    </div>
                `;

                postsContainer.innerHTML += postHTML;
            });

            // ğŸ“Œ ê²Œì‹œë¬¼ í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€ (ìƒì„¸ í˜ì´ì§€ ì´ë™)
document.querySelectorAll(".post").forEach(post => {
    post.addEventListener("click", function (event) {
        if (event.target.classList.contains("heart")) {
            return; // ğŸ›‘ í•˜íŠ¸ í´ë¦­ ì‹œ ìƒì„¸ í˜ì´ì§€ ì´ë™ ë°©ì§€
        }
        const postId = this.getAttribute("data-id");

        // í•´ë‹¹ ê²Œì‹œë¬¼ì˜ url_nameì„ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ posts ë°°ì—´ì„ í™œìš©
        const postData = data.find(post => post.id == postId);
        if (!postData) {
            console.error("âŒ í•´ë‹¹ postIdì— ëŒ€í•œ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ:", postId);
            return;
        }

        const urlName = postData.url_name;
        window.location.href = `blog_detail.html?post_id=${postId}&urlname=${urlName}`;

    });
});


            // ğŸ“Œ í•˜íŠ¸ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€ (ì¢‹ì•„ìš” ìš”ì²­)
            document.querySelectorAll(".heart").forEach(heart => {
    heart.addEventListener("click", async function (event) {
        event.stopPropagation(); // ğŸ›‘ ê²Œì‹œë¬¼ í´ë¦­ ì´ë²¤íŠ¸ ë°©ì§€

        const postId = this.getAttribute("data-id");

        if (!postId || postId === "null") {
            console.error("âŒ postIdê°€ nullì…ë‹ˆë‹¤. data-idê°€ HTMLì—ì„œ ì •ìƒì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.");
            return;
        }

        const likeCountElement = document.getElementById(`like-count-${postId}`);

        try {
            console.log(`ğŸ”¥ ì¢‹ì•„ìš” ìš”ì²­ì„ ë³´ëƒ„: /posts/${postId}/heart/`);

            const likeResponse = await fetch(`http://127.0.0.1:8000/posts/${postId}/heart/`, {
                method: "POST",
                headers: {
                    "Authorization": `Bearer ${accessToken}`,
                    "Content-Type": "application/json"
                }
            });

            // âœ… ì„œë²„ ì‘ë‹µì„ JSONìœ¼ë¡œ ë³€í™˜
            const result = await likeResponse.json();
            console.log(`ğŸ“¢ ì„œë²„ ì‘ë‹µ ë°ì´í„°:`, result);

            // âœ… ì„œë²„ ì‘ë‹µì„ ê¸°ë°˜ìœ¼ë¡œ ì¢‹ì•„ìš” ìƒíƒœ ì—…ë°ì´íŠ¸
            if (result.message === "í•˜íŠ¸ ì¶”ê°€") {
                this.textContent = "â¤ï¸"; // ì¢‹ì•„ìš” ì¶”ê°€ ìƒíƒœ
                likeCountElement.textContent = result.like_count; // ì„œë²„ì—ì„œ ë°›ì€ ì¢‹ì•„ìš” ê°œìˆ˜ ë°˜ì˜
            } else if (result.message === "í•˜íŠ¸ ì·¨ì†Œ") {
                this.textContent = "ğŸ¤"; // ì¢‹ì•„ìš” ì·¨ì†Œ ìƒíƒœ
                likeCountElement.textContent = result.like_count; // ì„œë²„ì—ì„œ ë°›ì€ ì¢‹ì•„ìš” ê°œìˆ˜ ë°˜ì˜
            } else {
                console.warn("âš ï¸ ì˜ˆìƒì¹˜ ëª»í•œ ì„œë²„ ì‘ë‹µ:", result);
            }

        } catch (error) {
            console.error("âŒ ì„œë²„ ì—°ê²° ì˜¤ë¥˜:", error);
        }
    });
});
        } else {
            alert("ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
            console.log(`âŒ ì‘ë‹µ ìƒíƒœ ì½”ë“œ:`, response.status);
        }
    } catch (error) {
        console.error("âŒ ì„œë²„ ì—°ê²° ì˜¤ë¥˜:", error);
        alert("ì„œë²„ ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
    }
}

    // ê¸°ë³¸ì ìœ¼ë¡œ "ì„œë¡œì´ì›ƒ ê²Œì‹œê¸€"ì„ ë¶ˆëŸ¬ì˜¤ê¸°
    fetchMutualPosts();
});




document.addEventListener("DOMContentLoaded", async function () {
                const accessToken = localStorage.getItem("access_token");
                if (!accessToken) {
                    alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
                    window.location.href = "login.html";
                    return;
                }
            
                try {
                    const response = await fetch("http://127.0.0.1:8000/profile/me/", {
                        method: "GET",
                        headers: {
                            "Authorization": `Bearer ${accessToken}`,
                            "Content-Type": "application/json"
                        }
                    });
            
                    if (response.status === 200) {
                        const data = await response.json();
                        const nickname = data.username; // ë‹‰ë„¤ì„ ê°€ì ¸ì˜¤ê¸°
                        const profilePic = data.user_pic; // í”„ë¡œí•„ ì‚¬ì§„ ê°€ì ¸ì˜¤ê¸°
            
                        // ğŸ”¥ ë‹‰ë„¤ì„ ë³€ê²½
                        document.querySelectorAll(".user-nickname").forEach(el => {
                            el.innerText = nickname;
                        });
            
                        // ğŸ”¥ í”„ë¡œí•„ ì‚¬ì§„ ë³€ê²½
                        document.querySelectorAll(".user-profilepicture").forEach(img => {
                            img.src = profilePic;
                        });

                        document.querySelectorAll(".itemtitlefont").forEach(e2 => {
                                e2.innerText = blogname;
                            });
            
                    } else {
                        alert("ì‚¬ìš©ì ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                        console.log("âŒ ì‘ë‹µ ìƒíƒœ ì½”ë“œ:", response.status);
                    }
                } catch (error) {
                    console.error("âŒ ì„œë²„ ì—°ê²° ì˜¤ë¥˜:", error);
                    alert("ì„œë²„ ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                }
            });
            







function executeSearch() {
    const urlParams = new URLSearchParams(window.location.search);
    const searchType = urlParams.get("type"); // ê²€ìƒ‰ ìœ í˜• (geul, blog, id)
    const searchQuery = urlParams.get("query"); // ê²€ìƒ‰ì–´


    console.log(`ğŸ”¹ ê²€ìƒ‰ ìœ í˜•: ${searchType}, ê²€ìƒ‰ì–´: ${searchQuery}`);

    // ğŸ”¹ ê²€ìƒ‰ì°½ì— ìë™ ì…ë ¥
    document.getElementById("search-input").value = searchQuery;
    document.getElementById("search-type").value = searchType;

    // ğŸ”¹ ë¡œë”© ë©”ì‹œì§€ í‘œì‹œ
    document.querySelector('.post-list').innerHTML = "<p>ê²€ìƒ‰ ì¤‘...</p>";

    // ğŸ”¹ ë°±ì—”ë“œì—ì„œ ê²€ìƒ‰ ê²°ê³¼ ê°€ì ¸ì˜¤ê¸°
    fetch(`http://127.0.0.1:8000/search?type=${encodeURIComponent(searchType)}&query=${encodeURIComponent(searchQuery)}`)
        .then(response => {
            if (!response.ok) {
                throw new Error(`ì„œë²„ ì‘ë‹µ ì˜¤ë¥˜: ${response.status}`);
            }
            return response.json();
        })
        .then(data => {
            document.querySelector('.post-list').innerHTML = ""; // ë¡œë”© ë©”ì‹œì§€ ì œê±°
            renderSearchResults(searchType, data);
        })
        .catch(error => {
            console.error("âŒ ê²€ìƒ‰ ê²°ê³¼ ë¶ˆëŸ¬ì˜¤ê¸° ì˜¤ë¥˜:", error);
            document.querySelector('.post-list').innerHTML = "<p>ê²€ìƒ‰ ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</p>";
        });
}


document.addEventListener("DOMContentLoaded", function () {
    const searchButton = document.querySelector(".search-button");
    const searchTypeSelect = document.getElementById("search-type");

    searchButton.addEventListener("click", async function () {
        const searchType = searchTypeSelect.value; // ì„ íƒí•œ ê²€ìƒ‰ ìœ í˜•
        const accessToken = localStorage.getItem("access_token"); // ë¡œê·¸ì¸í•œ ì‚¬ìš©ì í† í°
        let loggedInUser = "";

        if (accessToken) {
            try {
                // ğŸ”¹ ë¡œê·¸ì¸ëœ ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°
                const response = await fetch("http://127.0.0.1:8000/profile/me/", {
                    method: "GET",
                    headers: {
                        "Authorization": `Bearer ${accessToken}`,
                        "Content-Type": "application/json"
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    loggedInUser = encodeURIComponent(data.username);
                } else {
                    console.error("ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                }
            } catch (error) {
                console.error("ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸° ì˜¤ë¥˜:", error);
            }
        }

        // ğŸ”¹ ê²€ìƒ‰ í˜ì´ì§€ë¡œ ì´ë™ (ë¡œê·¸ì¸ëœ ì‚¬ìš©ì ì •ë³´ í¬í•¨)
        redirectToSearch(searchType, loggedInUser);
    });

    function redirectToSearch(searchType, username) {
        console.log(`ğŸ”¹ ê²€ìƒ‰ ì‹¤í–‰: ${searchType}, ë¡œê·¸ì¸ëœ ì‚¬ìš©ì: ${username}`);

        let url = `search.html?type=${encodeURIComponent(searchType)}`;
        if (username) {
            url += `&loggedUser=${username}`;
        }

        window.location.href = url;
    }
});
        </script>
        
</body>
</html>